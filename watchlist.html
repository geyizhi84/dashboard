<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sovereign Market Terminal | Google Powered</title>
    <style>
        :root { --bg: #ffffff; --sub-header: #fdb927; --pos-bg: #c6efce; --neg-bg: #ffc7ce; --border: #d1d1d1; }
        body { font-family: 'Segoe UI', sans-serif; margin: 0; padding: 20px; }
        .container { background: white; max-width: 1200px; margin: 0 auto; border: 1px solid #000; }
        .main-title { font-size: 24px; font-weight: 900; padding: 10px; border-bottom: 2px solid #000; }
        .group-header { background: var(--sub-header); font-weight: bold; padding: 5px 15px; border-bottom: 1px solid #000; font-size: 13px; }
        table { width: 100%; border-collapse: collapse; font-size: 12px; }
        th { background: #e2e2e2; border: 1px solid var(--border); padding: 5px; }
        td { border: 1px solid var(--border); padding: 5px 10px; text-align: center; }
        .ticker { font-weight: bold; text-align: left; }
        .pos { background-color: var(--pos-bg); color: #006100; }
        .neg { background-color: var(--neg-bg); color: #9c0006; }
    </style>
</head>
<body>

<div class="container">
    <div class="main-title">Market Watchlist</div>
    <div id="watchlist-container">
        <div style="padding: 20px; text-align: center;">Initializing Google Finance Stream...</div>
    </div>
</div>

<script>
    const CSV_URL = 'PASTE_YOUR_GOOGLE_SHEET_CSV_URL_HERE';

    async function updateDashboard() {
        try {
            const response = await fetch(CSV_URL);
            const data = await response.text();
            const rows = data.split('\n').slice(1); // Remove header row

            let html = `<table><thead><tr><th>Ticker</th><th>Price</th><th>1D%</th><th>5D%</th><th>YTD%</th></tr></thead><tbody>`;
            
            rows.forEach(row => {
                const cols = row.split(',');
                if (cols.length < 2) return;
                
                const ticker = cols[0];
                const price = parseFloat(cols[1]).toFixed(2);
                const d1 = (parseFloat(cols[2]) * 100).toFixed(2);
                
                html += `
                    <tr>
                        <td class="ticker">${ticker}</td>
                        <td style="text-align:right">${price}</td>
                        <td class="${d1 >= 0 ? 'pos' : 'neg'}">${d1}%</td>
                        </tr>
                `;
            });

            html += `</tbody></table>`;
            document.getElementById('watchlist-container').innerHTML = html;
        } catch (e) {
            console.error("Connection failed", e);
        }
    }

    // Refresh every 60 seconds
    setInterval(updateDashboard, 60000);
    updateDashboard();
</script>
</body>
</html>
